

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>finitediff.grid package &mdash; finitediff 0.6.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="finitediff 0.6.2 documentation" href="index.html"/>
        <link rel="up" title="finitediff package" href="finitediff.html"/>
        <link rel="next" title="finitediff.grid.tests package" href="finitediff.grid.tests.html"/>
        <link rel="prev" title="finitediff package" href="finitediff.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> finitediff
          

          
          </a>

          
            
            
              <div class="version">
                0.6.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="finitediff.html">finitediff package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="finitediff.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">finitediff.grid package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-finitediff.grid.make">finitediff.grid.make module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-finitediff.grid.plotting">finitediff.grid.plotting module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-finitediff.grid.rebalance">finitediff.grid.rebalance module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-finitediff.grid.refine">finitediff.grid.refine module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-finitediff.grid.util">finitediff.grid.util module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="finitediff.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="finitediff.html#module-finitediff.util">finitediff.util module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">finitediff</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="finitediff.html">finitediff package</a> &raquo;</li>
        
      <li>finitediff.grid package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/finitediff.grid.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-finitediff.grid">
<span id="finitediff-grid-package"></span><h1>finitediff.grid package<a class="headerlink" href="#module-finitediff.grid" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="finitediff.grid.tests.html">finitediff.grid.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="finitediff.grid.tests.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="finitediff.grid.tests.html#module-finitediff.grid.tests.test_make">finitediff.grid.tests.test_make module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finitediff.grid.tests.html#module-finitediff.grid.tests.test_rebalance">finitediff.grid.tests.test_rebalance module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finitediff.grid.tests.html#module-finitediff.grid.tests.test_refine">finitediff.grid.tests.test_refine module</a></li>
<li class="toctree-l2"><a class="reference internal" href="finitediff.grid.tests.html#module-finitediff.grid.tests.test_util">finitediff.grid.tests.test_util module</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-finitediff.grid.make">
<span id="finitediff-grid-make-module"></span><h2>finitediff.grid.make module<a class="headerlink" href="#module-finitediff.grid.make" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="finitediff.grid.make.adapted_grid">
<code class="descclassname">finitediff.grid.make.</code><code class="descname">adapted_grid</code><span class="sig-paren">(</span><em>xstart</em>, <em>xstop</em>, <em>cb</em>, <em>grid_additions=(50</em>, <em>50)</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/finitediff/grid/make.html#adapted_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#finitediff.grid.make.adapted_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>” Creates an adapted (1D) grid by subsequent subgrid insertions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>xstart</strong> : float</p>
<p><strong>xstop</strong> : float</p>
<p><strong>cb</strong> : callbable</p>
<blockquote>
<div><p>Function to be evaluated (note that noise is handled poorly).</p>
</div></blockquote>
<p><strong>grid_additions</strong> : iterable of ints (even numbers)</p>
<blockquote>
<div><p>Sequence specifying how many gridpoints to add each time.</p>
</div></blockquote>
<p class="last"><strong>**kwargs</strong> : see <code class="xref py py-func docutils literal notranslate"><span class="pre">refine_grid()</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-finitediff.grid.plotting">
<span id="finitediff-grid-plotting-module"></span><h2>finitediff.grid.plotting module<a class="headerlink" href="#module-finitediff.grid.plotting" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="finitediff.grid.plotting.plot_convergence">
<code class="descclassname">finitediff.grid.plotting.</code><code class="descname">plot_convergence</code><span class="sig-paren">(</span><em>key</em>, <em>values</em>, <em>cb</em>, <em>metric=None</em>, <em>xstart=0</em>, <em>xstop=2</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/finitediff/grid/plotting.html#plot_convergence"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#finitediff.grid.plotting.plot_convergence" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-finitediff.grid.rebalance">
<span id="finitediff-grid-rebalance-module"></span><h2>finitediff.grid.rebalance module<a class="headerlink" href="#module-finitediff.grid.rebalance" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="finitediff.grid.rebalance.combine_grids">
<code class="descclassname">finitediff.grid.rebalance.</code><code class="descname">combine_grids</code><span class="sig-paren">(</span><em>grids</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/finitediff/grid/rebalance.html#combine_grids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#finitediff.grid.rebalance.combine_grids" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines multiple grids and prunes them using pre_pruning mask</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grids</strong> : iterable of array_like grids</p>
<p><strong>**</strong> : dict</p>
<blockquote>
<div><p>Keyword arguments passed on to pre_pruning_mask</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Strictly increasing monotonic array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="finitediff.grid.rebalance.grid_pruning_mask">
<code class="descclassname">finitediff.grid.rebalance.</code><code class="descname">grid_pruning_mask</code><span class="sig-paren">(</span><em>grid</em>, <em>err</em>, <em>ndrop=None</em>, <em>protect_sparse=None</em>, <em>pow_err=2</em>, <em>pow_dx=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/finitediff/grid/rebalance.html#grid_pruning_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#finitediff.grid.rebalance.grid_pruning_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a mask for grid pruning.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grid</strong> : array</p>
<p><strong>err</strong> : array</p>
<p><strong>ndrop</strong> : int</p>
<blockquote>
<div><p>If not provided taken as 25% of grid size (rounded upward).</p>
</div></blockquote>
<p><strong>protect_sparse</strong> : int</p>
<blockquote>
<div><p>If not provided taken as 25% of grid size (rounded upward).</p>
</div></blockquote>
<p><strong>pow_err</strong> : number</p>
<blockquote>
<div><p>Exponent of error in weighting.</p>
</div></blockquote>
<p><strong>pow_dx</strong> : number</p>
<blockquote class="last">
<div><p>Exponent of grid spacing in weighting.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="finitediff.grid.rebalance.pre_pruning_mask">
<code class="descclassname">finitediff.grid.rebalance.</code><code class="descname">pre_pruning_mask</code><span class="sig-paren">(</span><em>grid</em>, <em>rtol=1e-12</em>, <em>atol=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/finitediff/grid/rebalance.html#pre_pruning_mask"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#finitediff.grid.rebalance.pre_pruning_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a mask for grid pruning.</p>
<p>Any grid spacing smaller than <code class="docutils literal notranslate"><span class="pre">rtol*gridvalue</span> <span class="pre">+</span> <span class="pre">atol</span></code> will
be pruned. In general the value on the right is removed unless it is
the last point in the grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grid</strong> : array</p>
<p><strong>rtol</strong> : float</p>
<p><strong>atol</strong> : float</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">NumPy array of <code class="docutils literal notranslate"><span class="pre">numpy.bool_</span></code> (to be used as mask).</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="finitediff.grid.rebalance.rebalanced_grid">
<code class="descclassname">finitediff.grid.rebalance.</code><code class="descname">rebalanced_grid</code><span class="sig-paren">(</span><em>grid</em>, <em>err</em>, <em>base=0.25</em>, <em>num=None</em>, <em>resolution_factor=10</em>, <em>smooth_fact=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/finitediff/grid/rebalance.html#rebalanced_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#finitediff.grid.rebalance.rebalanced_grid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-finitediff.grid.refine">
<span id="finitediff-grid-refine-module"></span><h2>finitediff.grid.refine module<a class="headerlink" href="#module-finitediff.grid.refine" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="finitediff.grid.refine.refine_grid">
<code class="descclassname">finitediff.grid.refine.</code><code class="descname">refine_grid</code><span class="sig-paren">(</span><em>grid</em>, <em>cb</em>, <em>grid_additions=(50</em>, <em>50)</em>, <em>ntrail=2</em>, <em>blurs=(()</em>, <em>())</em>, <em>metric=None</em>, <em>atol=None</em>, <em>rtol=None</em>, <em>extremum_refinement=None</em>, <em>snr=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/finitediff/grid/refine.html#refine_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#finitediff.grid.refine.refine_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Refines an existing grid by adding points to it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grid</strong> : array</p>
<p><strong>cb</strong> : callbable</p>
<blockquote>
<div><p>Function to be evaluated (note that noise is handled poorly).</p>
</div></blockquote>
<p><strong>grid_additions</strong> : iterable of ints (even numbers)</p>
<blockquote>
<div><p>Sequence specifying how many gridpoints to add each time.</p>
</div></blockquote>
<p><strong>ntrail</strong> : int (&gt;= 2)</p>
<blockquote>
<div><p>Number of points to include in the look-ahead extrapolation.</p>
</div></blockquote>
<p><strong>blurs</strong> : pair of iterables of ints (of same length)</p>
<blockquote>
<div><p>Blur fractions of absolute residuals to neighbors.</p>
</div></blockquote>
<p><strong>atol</strong> : float</p>
<blockquote>
<div><p>Absolute tolerance to be fulfilled by all absolute residuals for early exit.</p>
</div></blockquote>
<p><strong>rtol</strong> : float</p>
<blockquote>
<div><p>Relative tolerance to be fulfilled by all absolute residuals for early exit.</p>
</div></blockquote>
<p><strong>extremum_refinement</strong> : locator (callable), n (int), predicate (callable)</p>
<blockquote>
<div><p>Between each grid addition a callable for locating the extremum (e.g. np.argmax)
can be evaluated. The integer specifies how many gridpoints that should be inserted
on each side (one side if on boundary) of the extremum.</p>
</div></blockquote>
<p><strong>snr</strong> : bool</p>
<blockquote>
<div><p>Use signal-to-noise ratio the lower the grid-addition-weight of potential noise.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(grid, errors)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-finitediff.grid.util">
<span id="finitediff-grid-util-module"></span><h2>finitediff.grid.util module<a class="headerlink" href="#module-finitediff.grid.util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="finitediff.grid.util.grid_error">
<code class="descclassname">finitediff.grid.util.</code><code class="descname">grid_error</code><span class="sig-paren">(</span><em>grid</em>, <em>y</em>, <em>ntrail=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/finitediff/grid/util.html#grid_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#finitediff.grid.util.grid_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates error at each grid point from extrapolation.</p>
<p>Extrapolates from left (‘fw’) or from right (‘bw’).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>grid</strong> : array</p>
<p><strong>y</strong> : array</p>
<p><strong>ntrail</strong> : int</p>
<blockquote class="last">
<div><p>Number of points to include in the look-ahead extrapolation.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="finitediff.grid.util.locate_discontinuity">
<code class="descclassname">finitediff.grid.util.</code><code class="descname">locate_discontinuity</code><span class="sig-paren">(</span><em>grid</em>, <em>y</em>, <em>consider</em>, <em>trnsfm=&lt;function &lt;lambda&gt;&gt;</em>, <em>ntrail=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/finitediff/grid/util.html#locate_discontinuity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#finitediff.grid.util.locate_discontinuity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="finitediff.grid.util.pool_discontinuity_approx">
<code class="descclassname">finitediff.grid.util.</code><code class="descname">pool_discontinuity_approx</code><span class="sig-paren">(</span><em>loc_res</em>, <em>consistency_criterion=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/finitediff/grid/util.html#pool_discontinuity_approx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#finitediff.grid.util.pool_discontinuity_approx" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="finitediff.grid.tests.html" class="btn btn-neutral float-right" title="finitediff.grid.tests package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="finitediff.html" class="btn btn-neutral" title="finitediff package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Bjoern Dahlgren &lt;bjodah@gmail.com&gt;.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.6.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>